"use strict";(self.webpackChunkrecon_UI=self.webpackChunkrecon_UI||[]).push([[888],{2888:($,v,d)=>{d.r(v),d.d(v,{NewTabsRoutingModule:()=>J});var u=d(8498),g=d(8908),t=d(7705),h=d(4006),p=d(6316),m=d(7222),f=d(6554),T=d(345),b=d(9371);let y=(()=>{class a{constructor(i,n,e,o,s,r,l){this.route=i,this.dialog=n,this.renderer=e,this.URMService=o,this.notify=s,this.spinner=r,this.titleService=l,this.paginationPageSize=20,this.rowData=[],this.columnDefs=[{field:"ATM_ID",headerName:"ATM Id",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txns_No",headerName:"Txns No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Card_No",headerName:"Card No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Time",headerName:"Time",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"State",headerName:"State",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Location",headerName:"Location",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Resp_Code",headerName:"Resp Code",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txns_Date",headerName:"Txns Date",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Unique_No",headerName:"Unique No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"ONUS/OFFUS",headerName:"ONUS/OFFUS",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txns_Amount",headerName:"Txns Amount",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Dispense_Amt",headerName:"Dispense Amt",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"SW_Resp_Code",headerName:"SW Resp Code",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Currency_Code",headerName:"Currency Code",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Branch_Location",headerName:"Branch Location",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"ONUS_OFFUS_code",headerName:"ONUS/OFFUS Code",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"RRN_NO",headerName:"RRN No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]}],this.defaultColDef={resizable:!0,autoHeight:!0,sortable:!0,maxWidth:1e3,minWidth:200,flex:1},this.gridOptions={cacheBlockSize:10,alwaysShowHorizontalScroll:!0,suppressRowClickSelection:!0,rowSelection:"multiple",cellHeight:60}}ngOnInit(){this.spinner.show(),this.productId=localStorage.getItem("product_id"),this.applicationId=localStorage.getItem("application_id"),this.projectId=localStorage.getItem("project_id"),this.route.queryParams.subscribe(i=>{const n="Switch Transaction listing";n&&this.titleService.setTitle(n),this.atmId=i.atmId,this.fromDate=i.fromDate,this.toDate=i.toDate,this.previousEodLastSuccesTxns=i.previousEodLastSuccesTxns,this.lastEodLastSuccessTxns=i.lastEodLastSuccessTxns}),console.log("ATM ID:",this.atmId),console.log("fromDate:",this.fromDate),console.log("toDate:",this.toDate),console.log("previousEodLastSuccesTxns:",this.previousEodLastSuccesTxns),console.log("lastEodLastSuccessTxns:",this.lastEodLastSuccessTxns),this.getSwitchAtmListing()}getSwitchAtmListing(){this.URMService.getSwitchAtmListing(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromEodDate:this.fromDate,toEodDate:this.toDate,prevTxnNo:this.previousEodLastSuccesTxns,lastTxnNo:this.lastEodLastSuccessTxns}).then(n=>{console.log("getSwitchAtmListing response =>",n),200==n.statusCode&&(n.result.length>0?(this.rowData=n.result,this.spinner.hide()):(this.notify.showErrorToast("No transaction available for specified inputs!","Close"),this.spinner.hide()))}).catch(n=>{console.log("error",n),this.spinner.hide()})}onGridReady(i){this.gridApi=i.api,this.params=i}downloadSwitchTxnListingData(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"});console.log("Inside downloadSwitchTxnListingData"),this.URMService.downloadSwitchTxnListingData(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromEodDate:this.fromDate,toEodDate:this.toDate,prevTxnNo:this.previousEodLastSuccesTxns,lastTxnNo:this.lastEodLastSuccessTxns}).then(e=>{console.log("Response in downloadSwitchTxnListingData",e);let o=window.navigator;console.log("New Varaiable",o);const s=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"});if(console.log("newBlob",s),o&&o.msSaveOrOpenBlob)o.msSaveOrOpenBlob(s,`Switch_Transactions_${this.toDate}.xlsx`),i.close();else{let l=window.URL.createObjectURL(s);var r=document.createElement("a");r.download=`Switch_Transactions_${this.toDate}.xlsx`,r.href=l,document.body.appendChild(r),r.click(),document.body.removeChild(r),i.close()}}).catch(e=>{console.log("error =>",e),i.close()})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(u.nX),t.rXU(h.bZ),t.rXU(t.sFG),t.rXU(p.V),t.rXU(m.J),t.rXU(f.ex),t.rXU(T.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-swtich-trxn-listing"]],decls:27,vars:11,consts:[[1,"switch-txn-container"],[1,"inputs-content"],[1,"text"],[1,"value"],[1,"download-btn"],[1,"_btnnext",3,"click"],[1,"ag-table"],[1,"ag-theme-quartz",2,"height","80vh",3,"rowData","columnDefs","gridOptions","defaultColDef","pagination","paginationPageSize","gridReady"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span",2),t.EFF(3,"ATM Id:\xa0 "),t.j41(4,"span",3),t.EFF(5),t.k0s()(),t.j41(6,"span",2),t.EFF(7,"From eod:\xa0 "),t.j41(8,"span",3),t.EFF(9),t.k0s()(),t.j41(10,"span",2),t.EFF(11,"To eod:\xa0 "),t.j41(12,"span",3),t.EFF(13),t.k0s()(),t.j41(14,"span",2),t.EFF(15,"Previous EOD last successful txn no:\xa0 "),t.j41(16,"span",3),t.EFF(17),t.k0s()(),t.j41(18,"span",2),t.EFF(19,"Last EOD successful txn no:\xa0 "),t.j41(20,"span",3),t.EFF(21),t.k0s()()(),t.j41(22,"div",4)(23,"button",5),t.bIt("click",function(){return e.downloadSwitchTxnListingData()}),t.EFF(24,"Download file"),t.k0s()(),t.j41(25,"div",6)(26,"ag-grid-angular",7),t.bIt("gridReady",function(s){return e.onGridReady(s)}),t.k0s()()()),2&n&&(t.R7$(5),t.JRh(e.atmId),t.R7$(4),t.JRh(e.fromDate),t.R7$(4),t.JRh(e.toDate),t.R7$(4),t.JRh(e.previousEodLastSuccesTxns),t.R7$(4),t.JRh(e.lastEodLastSuccessTxns),t.R7$(5),t.Y8G("rowData",e.rowData)("columnDefs",e.columnDefs)("gridOptions",e.gridOptions)("defaultColDef",e.defaultColDef)("pagination",!0)("paginationPageSize",e.paginationPageSize))},dependencies:[b.xs],styles:[".inputs-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-auto-rows:50px;border-radius:5px;background:transparent;padding:20px 20px 0;gap:10px}.inputs-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border:1px solid #E9E9E9;border-radius:5px;background-color:#f9fafb;padding:1em;text-align:center}.value[_ngcontent-%COMP%]{font-weight:500}.ag-table[_ngcontent-%COMP%]{padding:20px}.download-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:20px 20px 0 0}.download-btn[_ngcontent-%COMP%]   ._btnnext[_ngcontent-%COMP%]{background:rgb(147,81,251);color:#fff;border:1px solid rgb(147,81,251);width:133px;height:40px;font-size:18px;font-weight:400;line-height:24px;border-radius:8px;cursor:pointer}"]})}}return a})(),R=(()=>{class a{constructor(i,n,e,o,s,r,l){this.route=i,this.dialog=n,this.renderer=e,this.URMService=o,this.notify=s,this.spinner=r,this.titleService=l,this.paginationPageSize=20,this.rowData=[],this.columnDefs=[{field:"ATM_ID",headerName:"ATM Id",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Balance",headerName:"Balance",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Branch_Location",headerName:"Branch Location",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Card_No",headerName:"Card No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Dr_Acct",headerName:"Dr Acct",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txns_No",headerName:"Txns No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Tran_Amt",headerName:"Tran_Amt",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Tran_Type",headerName:"Tran_Type",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Unique_No",headerName:"Unique No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Time",headerName:"Time",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Region_Name",headerName:"Region Name",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Tran_Remarks",headerName:"Txns No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Division_Name",headerName:"Division Name",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]}],this.defaultColDef={resizable:!0,autoHeight:!0,sortable:!0,maxWidth:1e3,minWidth:200,flex:1},this.gridOptions={cacheBlockSize:10,alwaysShowHorizontalScroll:!0,suppressRowClickSelection:!0,rowSelection:"multiple",cellHeight:60}}ngOnInit(){this.spinner.show(),this.productId=localStorage.getItem("product_id"),this.applicationId=localStorage.getItem("application_id"),this.projectId=localStorage.getItem("project_id"),this.route.queryParams.subscribe(i=>{const n="GL Transaction listing";n&&this.titleService.setTitle(n),this.atmId=i.atmId,this.fromDate=i.fromDate,this.toDate=i.toDate,this.previousEodLastSuccesTxns=i.previousEodLastSuccesTxns,this.lastEodLastSuccessTxns=i.lastEodLastSuccessTxns}),console.log("ATM ID:",this.atmId),console.log("fromDate:",this.fromDate),console.log("toDate:",this.toDate),console.log("previousEodLastSuccesTxns:",this.previousEodLastSuccesTxns),console.log("lastEodLastSuccessTxns:",this.lastEodLastSuccessTxns),this.getGlTxnATMListing()}getGlTxnATMListing(){this.URMService.getGlTxnATMListing(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromEodDate:this.fromDate,toEodDate:this.toDate,prevTxnNo:this.previousEodLastSuccesTxns,lastTxnNo:this.lastEodLastSuccessTxns}).then(n=>{console.log("getGlTxnATMListing response =>",n),200==n.statusCode&&(n.result.length>0?(this.rowData=n.result,this.spinner.hide()):(this.notify.showErrorToast("No transaction available for specified inputs!","Close"),this.spinner.hide()))}).catch(n=>{console.log("error",n),this.spinner.hide()})}onGridReady(i){this.gridApi=i.api,this.params=i}downloadGlTxnListingData(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"});console.log("Inside downloadGlTxnListingData"),this.URMService.downloadGlTxnListingData(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromEodDate:this.fromDate,toEodDate:this.toDate,prevTxnNo:this.previousEodLastSuccesTxns,lastTxnNo:this.lastEodLastSuccessTxns}).then(e=>{console.log("Response in downloadSwitchTxnListingData",e);let o=window.navigator;console.log("New Varaiable",o);const s=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"});if(console.log("newBlob",s),o&&o.msSaveOrOpenBlob)o.msSaveOrOpenBlob(s,`GL_Transactions_${this.toDate}.xlsx`),i.close();else{let l=window.URL.createObjectURL(s);var r=document.createElement("a");r.download=`GL_Transactions_${this.toDate}.xlsx`,r.href=l,document.body.appendChild(r),r.click(),document.body.removeChild(r),i.close()}}).catch(e=>{console.log("error =>",e),i.close()})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(u.nX),t.rXU(h.bZ),t.rXU(t.sFG),t.rXU(p.V),t.rXU(m.J),t.rXU(f.ex),t.rXU(T.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-gl-trxn-listing"]],decls:27,vars:11,consts:[[1,"switch-txn-container"],[1,"inputs-content"],[1,"text"],[1,"value"],[1,"download-btn"],[1,"_btnnext",3,"click"],[1,"ag-table"],[1,"ag-theme-quartz",2,"height","80vh",3,"rowData","columnDefs","gridOptions","defaultColDef","pagination","paginationPageSize","gridReady"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span",2),t.EFF(3,"ATM Id:\xa0 "),t.j41(4,"span",3),t.EFF(5),t.k0s()(),t.j41(6,"span",2),t.EFF(7,"From eod:\xa0 "),t.j41(8,"span",3),t.EFF(9),t.k0s()(),t.j41(10,"span",2),t.EFF(11,"To eod:\xa0 "),t.j41(12,"span",3),t.EFF(13),t.k0s()(),t.j41(14,"span",2),t.EFF(15,"Previous EOD last successful txn no:\xa0 "),t.j41(16,"span",3),t.EFF(17),t.k0s()(),t.j41(18,"span",2),t.EFF(19,"Last EOD successful txn no:\xa0 "),t.j41(20,"span",3),t.EFF(21),t.k0s()()(),t.j41(22,"div",4)(23,"button",5),t.bIt("click",function(){return e.downloadGlTxnListingData()}),t.EFF(24,"Download file"),t.k0s()(),t.j41(25,"div",6)(26,"ag-grid-angular",7),t.bIt("gridReady",function(s){return e.onGridReady(s)}),t.k0s()()()),2&n&&(t.R7$(5),t.JRh(e.atmId),t.R7$(4),t.JRh(e.fromDate),t.R7$(4),t.JRh(e.toDate),t.R7$(4),t.JRh(e.previousEodLastSuccesTxns),t.R7$(4),t.JRh(e.lastEodLastSuccessTxns),t.R7$(5),t.Y8G("rowData",e.rowData)("columnDefs",e.columnDefs)("gridOptions",e.gridOptions)("defaultColDef",e.defaultColDef)("pagination",!0)("paginationPageSize",e.paginationPageSize))},dependencies:[b.xs],styles:[".inputs-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-auto-rows:50px;border-radius:5px;background:transparent;padding:20px 20px 0;gap:10px}.inputs-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border:1px solid #E9E9E9;border-radius:5px;background-color:#f9fafb;padding:1em;text-align:center}.value[_ngcontent-%COMP%]{font-weight:500}.ag-table[_ngcontent-%COMP%]{padding:20px}.download-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:20px 20px 0 0}.download-btn[_ngcontent-%COMP%]   ._btnnext[_ngcontent-%COMP%]{background:rgb(147,81,251);color:#fff;border:1px solid rgb(147,81,251);width:133px;height:40px;font-size:18px;font-weight:400;line-height:24px;border-radius:8px;cursor:pointer}"]})}}return a})(),I=(()=>{class a{constructor(i,n,e,o,s,r,l){this.route=i,this.dialog=n,this.renderer=e,this.URMService=o,this.notify=s,this.spinner=r,this.titleService=l,this.paginationPageSize=20,this.rowData=[],this.columnDefs=[{field:"ATM_ID",headerName:"ATM Id",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Card_No",headerName:"Card No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"RRN_No",headerName:"RRN No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txn_No",headerName:"Txn No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txn_Type",headerName:"Txn Type",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Unique_No",headerName:"Unique No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Resp_Code",headerName:"Resp Code",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txn_Amount",headerName:"Txn Amount",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Other_Details",headerName:"Other Details",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Unique_No",headerName:"Unique No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]}],this.defaultColDef={resizable:!0,autoHeight:!0,sortable:!0,maxWidth:1e3,minWidth:200,flex:1},this.gridOptions={cacheBlockSize:10,alwaysShowHorizontalScroll:!0,suppressRowClickSelection:!0,rowSelection:"multiple",cellHeight:60}}ngOnInit(){this.spinner.show(),this.productId=localStorage.getItem("product_id"),this.applicationId=localStorage.getItem("application_id"),this.projectId=localStorage.getItem("project_id"),this.route.queryParams.subscribe(i=>{const n="EJ Transaction listing";n&&this.titleService.setTitle(n),this.atmId=i.atmId,this.fromDate=i.fromDate,this.toDate=i.toDate,this.previousEodLastSuccesTxns=i.previousEodLastSuccesTxns,this.lastEodLastSuccessTxns=i.lastEodLastSuccessTxns}),console.log("ATM ID:",this.atmId),console.log("fromDate:",this.fromDate),console.log("toDate:",this.toDate),console.log("previousEodLastSuccesTxns:",this.previousEodLastSuccesTxns),console.log("lastEodLastSuccessTxns:",this.lastEodLastSuccessTxns),this.getEJTxnATMListing()}getEJTxnATMListing(){this.URMService.getEJTxnATMListing(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromEodDate:this.fromDate,toEodDate:this.toDate,prevTxnNo:this.previousEodLastSuccesTxns,lastTxnNo:this.lastEodLastSuccessTxns}).then(n=>{console.log("getEJTxnATMListing response =>",n),200==n.statusCode?n.result.length>0?(this.rowData=n.result,this.spinner.hide()):(this.notify.showErrorToast("No transaction available for specified inputs!","Close"),this.spinner.hide()):(this.notify.showErrorToast("Something went wrong!","Close"),this.spinner.hide())}).catch(n=>{console.log("error",n),this.spinner.hide()})}onGridReady(i){this.gridApi=i.api,this.params=i}downloadEjTxnListingData(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"});console.log("Inside downloadEjTxnListingData"),this.URMService.downloadEjTxnListingData(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromEodDate:this.fromDate,toEodDate:this.toDate,prevTxnNo:this.previousEodLastSuccesTxns,lastTxnNo:this.lastEodLastSuccessTxns}).then(e=>{console.log("Response in downloadSwitchTxnListingData",e);let o=window.navigator;console.log("New Varaiable",o);const s=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"});if(console.log("newBlob",s),o&&o.msSaveOrOpenBlob)o.msSaveOrOpenBlob(s,`EJ_Transactions_${this.toDate}.xlsx`),i.close();else{let l=window.URL.createObjectURL(s);var r=document.createElement("a");r.download=`EJ_Transactions_${this.toDate}.xlsx`,r.href=l,document.body.appendChild(r),r.click(),document.body.removeChild(r),i.close()}}).catch(e=>{console.log("error =>",e),i.close()})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(u.nX),t.rXU(h.bZ),t.rXU(t.sFG),t.rXU(p.V),t.rXU(m.J),t.rXU(f.ex),t.rXU(T.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-ej-trxn-listing"]],decls:27,vars:11,consts:[[1,"switch-txn-container"],[1,"inputs-content"],[1,"text"],[1,"value"],[1,"download-btn"],[1,"_btnnext",3,"click"],[1,"ag-table"],[1,"ag-theme-quartz",2,"height","80vh",3,"rowData","columnDefs","gridOptions","defaultColDef","pagination","paginationPageSize","gridReady"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span",2),t.EFF(3,"ATM Id:\xa0 "),t.j41(4,"span",3),t.EFF(5),t.k0s()(),t.j41(6,"span",2),t.EFF(7,"From eod:\xa0 "),t.j41(8,"span",3),t.EFF(9),t.k0s()(),t.j41(10,"span",2),t.EFF(11,"To eod:\xa0 "),t.j41(12,"span",3),t.EFF(13),t.k0s()(),t.j41(14,"span",2),t.EFF(15,"Previous EOD last successful txn no:\xa0 "),t.j41(16,"span",3),t.EFF(17),t.k0s()(),t.j41(18,"span",2),t.EFF(19,"Last EOD successful txn no:\xa0 "),t.j41(20,"span",3),t.EFF(21),t.k0s()()(),t.j41(22,"div",4)(23,"button",5),t.bIt("click",function(){return e.downloadEjTxnListingData()}),t.EFF(24,"Download file"),t.k0s()(),t.j41(25,"div",6)(26,"ag-grid-angular",7),t.bIt("gridReady",function(s){return e.onGridReady(s)}),t.k0s()()()),2&n&&(t.R7$(5),t.JRh(e.atmId),t.R7$(4),t.JRh(e.fromDate),t.R7$(4),t.JRh(e.toDate),t.R7$(4),t.JRh(e.previousEodLastSuccesTxns),t.R7$(4),t.JRh(e.lastEodLastSuccessTxns),t.R7$(5),t.Y8G("rowData",e.rowData)("columnDefs",e.columnDefs)("gridOptions",e.gridOptions)("defaultColDef",e.defaultColDef)("pagination",!0)("paginationPageSize",e.paginationPageSize))},dependencies:[b.xs],styles:[".inputs-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-auto-rows:50px;border-radius:5px;background:transparent;padding:20px 20px 0;gap:10px}.inputs-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border:1px solid #E9E9E9;border-radius:5px;background-color:#f9fafb;padding:1em;text-align:center}.value[_ngcontent-%COMP%]{font-weight:500}.download-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:20px 20px 0 0}.download-btn[_ngcontent-%COMP%]   ._btnnext[_ngcontent-%COMP%]{background:rgb(147,81,251);color:#fff;border:1px solid rgb(147,81,251);width:133px;height:40px;font-size:18px;font-weight:400;line-height:24px;border-radius:8px;cursor:pointer}.ag-table[_ngcontent-%COMP%]{padding:20px}"]})}}return a})();var x=d(177),S=d(6038);const N=function(a){return{"disabled-btn":a}};let j=(()=>{class a{constructor(i,n,e,o,s,r,l){this.route=i,this.dialog=n,this.renderer=e,this.URMService=o,this.notify=s,this.spinner=r,this.titleService=l,this.paginationPageSize=20,this.rowData=[],this.requestBodyForMissingTxn=[],this.columnDefs=[{headerCheckboxSelection:!0,headerCheckboxSelectionFilteredOnly:!0,checkboxSelection:!0,minWidth:200,maxWidth:50},{field:"ATM_ID",headerName:"ATM Id",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"TRAN_DATE",headerName:"Txn date.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Time",headerName:"Time",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"CARD_NO",headerName:"Card No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Account No",headerName:"Account No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txn No",headerName:"Txn No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"RRN",headerName:"RRN No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"AMOUNT",headerName:"Txn Amount",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Tran status",headerName:"Txn status",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txn Type",headerName:"Txn type",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"EJ Status",headerName:"EJ status",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Unique No/Ticket Id",headerName:"Unique No/Ticket Id",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]}],this.defaultColDef={resizable:!0,autoHeight:!0,sortable:!0,maxWidth:1e3,minWidth:200,flex:1},this.gridOptions={cacheBlockSize:10,alwaysShowHorizontalScroll:!0,suppressRowClickSelection:!0,rowSelection:"multiple",cellHeight:60}}ngOnInit(){this.spinner.show(),this.productId=localStorage.getItem("product_id"),this.applicationId=localStorage.getItem("application_id"),this.projectId=localStorage.getItem("project_id"),this.route.queryParams.subscribe(i=>{const n="EJ Missing transactions";n&&this.titleService.setTitle(n),this.atmId=i.atmId,this.fromDate=i.fromDate,this.toDate=i.toDate,this.previousEodLastSuccesTxns=i.previousEodLastSuccesTxns,this.lastEodLastSuccessTxns=i.lastEodLastSuccessTxns}),console.log("ATM ID:",this.atmId),console.log("fromDate:",this.fromDate),console.log("toDate:",this.toDate),console.log("previousEodLastSuccesTxns:",this.previousEodLastSuccesTxns),console.log("lastEodLastSuccessTxns:",this.lastEodLastSuccessTxns),this.getEjMissingScreenDetails()}getEjMissingScreenDetails(){this.URMService.getEjMissingScreenDetails(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromDate:this.fromDate,toDate:this.toDate}).then(n=>{console.log("getEJTxnATMListing response =>",n),200==n.statusCode?n.result.length>0?(this.rowData=n.result,this.spinner.hide()):(this.notify.showErrorToast("No transaction available for specified inputs!","Close"),this.spinner.hide()):(this.notify.showErrorToast("Something went wrong!","Close"),this.spinner.hide())}).catch(n=>{console.log("error",n),this.spinner.hide()})}onSelectionChanged(i){const n=i.api.getSelectedRows();this.requestBodyForMissingTxn=n,console.log("requestBodyForMissingTxn:",this.requestBodyForMissingTxn)}SubmitMissingEj(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"});console.log("requestBodyForMissingTxn",this.requestBodyForMissingTxn),this.URMService.insertMissingEjTxns(this.productId,this.applicationId,this.projectId,this.requestBodyForMissingTxn).then(n=>{console.log("Response in insertMissingEjTxns",n),200==n.statusCode||201==n.statusCode?(this.notify.showSuccessToast("Missing EJ transactions updated!","Close"),this.getEjMissingScreenDetails(),i.close()):(this.notify.showSuccessToast("Something went wrong!","Close"),i.close())}).catch(n=>{console.log("error =>",n),i.close()})}onGridReady(i){this.gridApi=i.api,this.params=i}downloadEjTxnListingData(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"});console.log("Inside downloadEjTxnListingData"),this.URMService.insertMissingEjTxns(this.productId,this.applicationId,this.projectId,{atm_id:this.atmId,fromDate:this.fromDate,toDate:this.toDate}).then(e=>{console.log("Response in downloadSwitchTxnListingData",e);let o=window.navigator;console.log("New Varaiable",o);const s=new Blob([e],{type:"application/vnd.ms-excel;charset=utf-8"});if(console.log("newBlob",s),o&&o.msSaveOrOpenBlob)o.msSaveOrOpenBlob(s,`EJ_Transactions_${this.toDate}.xlsx`),i.close();else{let l=window.URL.createObjectURL(s);var r=document.createElement("a");r.download=`EJ_Transactions_${this.toDate}.xlsx`,r.href=l,document.body.appendChild(r),r.click(),document.body.removeChild(r),i.close()}}).catch(e=>{console.log("error =>",e),i.close()})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(u.nX),t.rXU(h.bZ),t.rXU(t.sFG),t.rXU(p.V),t.rXU(m.J),t.rXU(f.ex),t.rXU(T.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-ej-missing-trxn-listing"]],decls:20,vars:13,consts:[[1,"switch-txn-container"],[1,"flex-inputs"],[1,"inputs-content"],[1,"text"],[1,"value"],[1,"download-btn"],[1,"_btnnext",3,"disabled","ngClass","click"],[1,"ag-table"],[1,"ag-theme-quartz",2,"height","85vh",3,"rowData","columnDefs","gridOptions","defaultColDef","pagination","paginationPageSize","gridReady","selectionChanged"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),t.EFF(4,"ATM Id:\xa0 "),t.j41(5,"span",4),t.EFF(6),t.k0s()(),t.j41(7,"span",3),t.EFF(8,"From eod:\xa0 "),t.j41(9,"span",4),t.EFF(10),t.k0s()(),t.j41(11,"span",3),t.EFF(12,"To eod:\xa0 "),t.j41(13,"span",4),t.EFF(14),t.k0s()()(),t.j41(15,"div",5)(16,"button",6),t.bIt("click",function(){return e.SubmitMissingEj()}),t.EFF(17," Submit "),t.k0s()()(),t.j41(18,"div",7)(19,"ag-grid-angular",8),t.bIt("gridReady",function(s){return e.onGridReady(s)})("selectionChanged",function(s){return e.onSelectionChanged(s)}),t.k0s()()()),2&n&&(t.R7$(6),t.JRh(e.atmId),t.R7$(4),t.JRh(e.fromDate),t.R7$(4),t.JRh(e.toDate),t.R7$(2),t.Y8G("disabled",!e.requestBodyForMissingTxn||!e.requestBodyForMissingTxn.length)("ngClass",t.eq3(11,N,!e.requestBodyForMissingTxn||!e.requestBodyForMissingTxn.length)),t.R7$(3),t.Y8G("rowData",e.rowData)("columnDefs",e.columnDefs)("gridOptions",e.gridOptions)("defaultColDef",e.defaultColDef)("pagination",!0)("paginationPageSize",e.paginationPageSize))},dependencies:[x.YU,b.xs,S.PW],styles:[".flex-inputs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.inputs-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-auto-rows:50px;border-radius:5px;background:transparent;padding:20px 20px 0;gap:10px}.inputs-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border:1px solid #E9E9E9;border-radius:5px;background-color:#f9fafb;padding:1em;text-align:center}.value[_ngcontent-%COMP%]{font-weight:500}.download-btn[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;padding:20px 20px 0 0}.download-btn[_ngcontent-%COMP%]   ._btnnext[_ngcontent-%COMP%]{background:rgb(147,81,251);color:#fff;border:1px solid rgb(147,81,251);width:133px;height:40px;font-size:18px;font-weight:400;line-height:24px;border-radius:8px;cursor:pointer}.download-btn[_ngcontent-%COMP%]   .disabled-btn[_ngcontent-%COMP%]{background-color:gray;cursor:default;color:#fff}.ag-table[_ngcontent-%COMP%]{padding:20px}"]})}}return a})();var c=d(9417),D=d(6467),L=d(9631),E=d(5084),_=d(2798),O=d(6600);function A(a,F){if(1&a&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&a){const i=F.$implicit;t.Y8G("value",i.value),t.R7$(1),t.SpI(" ",i.name," ")}}const k=function(a){return{"enabled-btn":a}};function P(a,F){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const i=F.$implicit;t.Y8G("value",null==i?null:i.type),t.R7$(1),t.JRh(null==i?null:i.type)}}const G=[{path:"switchTransactions",component:y},{path:"glTransaction",component:R},{path:"ejTransaction",component:I},{path:"missingEJ",component:j},{path:"adjustmentTTUM",component:(()=>{class a{constructor(i,n,e,o,s,r,l,w,M){this.route=i,this.dialog=n,this.renderer=e,this.URMService=o,this.notify=s,this.spinner=r,this.titleService=l,this.datePipe=w,this.fb=M,this.Categories=[{value:"C",name:"(PART-A)  Recon Excess Adjustment"},{value:"D",name:"(PART-B)  Recon Shortages Adjustment"}]}ngOnInit(){this.productId=localStorage.getItem("product_id"),this.applicationId=localStorage.getItem("application_id"),this.projectId=localStorage.getItem("project_id"),this.form=this.fb.group({atm_id:[this.atmId||"",c.k0.required],fromDate:[this.fromDate||"",c.k0.required],toDate:[this.toDate||"",c.k0.required],amount:["",c.k0.required],type:["",c.k0.required],remark:[""]}),this.route.queryParams.subscribe(i=>{const n="Add adjustment entry";n&&this.titleService.setTitle(n),this.atmId=i.atmId,this.fromDate=i.fromDate,this.toDate=i.toDate,console.log("ATM ID:",this.atmId),console.log("fromDate:",this.fromDate),console.log("toDate:",this.toDate);const e=this.parseDate(i.fromDate),o=this.parseDate(i.toDate);this.form.patchValue({atm_id:this.atmId,fromDate:e,toDate:o})})}parseDate(i){if(!i)return null;const n=i.split("-"),e=parseInt(n[0],10)-1,o=parseInt(n[1],10),s=parseInt(n[2],10);return new Date(s,e,o)}onFromDateChange(i){const n=i.value;this.form.get("fromDate")?.setValue(n)}onToDateChange(i){const n=i.value;this.form.get("toDate")?.setValue(n)}Submit(){if(this.form.valid){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"}),n={...this.form.value};n.fromDate=this.datePipe.transform(n.fromDate,"yyyy-MM-dd"),n.toDate=this.datePipe.transform(n.toDate,"yyyy-MM-dd"),console.log("Formatted Form Data:",n),this.URMService.AddadjustmentTTUM(this.productId,this.applicationId,this.projectId,n).then(e=>{if(201!==e.statusCode&&200!=e.statusCode)throw this.notify.showErrorToast("Failed to add adjustment ttum!","Close"),i.close(),new Error("Adjusment ttum not updated!");this.notify.showSuccessToast("Adjustment TTUM added successfully!","Close"),this.resetSpecificFields(),i.close()}).catch(e=>{console.error("An error occurred:",e),this.notify.showErrorToast("Failed to add adjustment ttum!","Close")})}}resetSpecificFields(){this.form.patchValue({amount:"",type:"",remark:""})}onCancel(){this.form.reset()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(u.nX),t.rXU(h.bZ),t.rXU(t.sFG),t.rXU(p.V),t.rXU(m.J),t.rXU(f.ex),t.rXU(T.hE),t.rXU(x.vh),t.rXU(c.ok))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-adjustment-entry-ttum"]],features:[t.Jv_([x.vh])],decls:44,vars:10,consts:[[1,"Add-adjustment-ttum"],[3,"formGroup"],[1,"box-content"],[1,"flexInput"],["appearance","outline"],["matInput","","formControlName","fromDate","placeholder","Select from date",3,"matDatepicker"],["fromDate",""],["matSuffix","",3,"for"],["fromDatepicker",""],["matInput","","formControlName","toDate","placeholder","Select to date",3,"matDatepicker"],["toDate",""],["toDatepicker",""],["formControlName","atm_id","matInput","","placeholder","ATM ID"],["matInput","","formControlName","amount","placeholder","Adjustment amount"],["formControlName","type","placeholder","Select Category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","remark","placeholder","Additional remarks"],[1,"create_btns"],[1,"_btncancel",3,"click"],[1,"_btnnext",3,"ngClass","disabled","click"],[3,"value"]],template:function(n,e){if(1&n&&(t.j41(0,"div",0)(1,"h2"),t.EFF(2,"Add Adjustment entry"),t.k0s(),t.j41(3,"form",1)(4,"div",2)(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),t.EFF(8,"From Date"),t.k0s(),t.nrm(9,"input",5,6)(11,"mat-datepicker-toggle",7)(12,"mat-datepicker",null,8),t.k0s(),t.j41(14,"mat-form-field",4)(15,"mat-label"),t.EFF(16,"To Date"),t.k0s(),t.nrm(17,"input",9,10)(19,"mat-datepicker-toggle",7)(20,"mat-datepicker",null,11),t.k0s()(),t.j41(22,"mat-form-field",4)(23,"mat-label"),t.EFF(24,"ATM Id"),t.k0s(),t.nrm(25,"input",12),t.k0s(),t.j41(26,"mat-form-field",4)(27,"mat-label"),t.EFF(28,"Adjustment amount"),t.k0s(),t.nrm(29,"input",13),t.k0s(),t.j41(30,"mat-form-field",4)(31,"mat-label"),t.EFF(32,"Category"),t.k0s(),t.j41(33,"mat-select",14),t.DNE(34,A,2,2,"mat-option",15),t.k0s()(),t.j41(35,"mat-form-field",4)(36,"mat-label"),t.EFF(37,"Additional remarks"),t.k0s(),t.nrm(38,"textarea",16),t.k0s()()(),t.j41(39,"div",17)(40,"button",18),t.bIt("click",function(){return e.onCancel()}),t.EFF(41,"Cancel"),t.k0s(),t.j41(42,"button",19),t.bIt("click",function(){return e.Submit()}),t.EFF(43,"Add"),t.k0s()()()),2&n){const o=t.sdS(13),s=t.sdS(21);t.R7$(3),t.Y8G("formGroup",e.form),t.R7$(6),t.Y8G("matDatepicker",o),t.R7$(2),t.Y8G("for",o),t.R7$(6),t.Y8G("matDatepicker",s),t.R7$(2),t.Y8G("for",s),t.R7$(15),t.Y8G("ngForOf",e.Categories),t.R7$(8),t.Y8G("ngClass",t.eq3(8,k,!e.form.invalid))("disabled",e.form.invalid)}},dependencies:[x.YU,x.Sq,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,D.rl,D.nJ,D.yw,L.fg,E.Vh,E.bZ,E.bU,_.VO,O.wT,S.PW],styles:[".Add-adjustment-ttum[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding-top:40px}.Add-adjustment-ttum[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;font-weight:500;text-align:center}.Add-adjustment-ttum[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;width:100%;max-width:800px;gap:20px;border:1px solid #e2e2e2;border-radius:8px;background-color:#f7f7f7;padding:20px}.Add-adjustment-ttum[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.Add-adjustment-ttum[_ngcontent-%COMP%]   .box-content[_ngcontent-%COMP%]   .flexInput[_ngcontent-%COMP%]{display:flex;width:100%;gap:62px}.Add-adjustment-ttum[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:1rem}.Add-adjustment-ttum[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:11px 36px;border-radius:7px;background:none;border:none;font-weight:500;font-family:Roboto,Helvetica Neue,sans-serif;cursor:pointer}.Add-adjustment-ttum[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]   ._btncancel[_ngcontent-%COMP%]{border:2px solid rgb(230,225,238);color:#6b6b6b}.Add-adjustment-ttum[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]   ._btnnext[_ngcontent-%COMP%]{background:gray;color:#fff}.Add-adjustment-ttum[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]   ._btnnext.disabled[_ngcontent-%COMP%]{background-color:#ccc;cursor:default}.Add-adjustment-ttum[_ngcontent-%COMP%]   .create_btns[_ngcontent-%COMP%]   .enabled-btn[_ngcontent-%COMP%]{background:rgb(147,81,251);color:#fff}"]})}}return a})()},{path:"exceptionTransactions",component:(()=>{class a{constructor(i,n,e,o,s,r,l){this.route=i,this.dialog=n,this.renderer=e,this.URMService=o,this.notify=s,this.spinner=r,this.titleService=l,this.fromDateFormatted="",this.toDateFormatted="",this.paginationPageSize=20,this.rowData=[],this.reportBaseType=[],this.reportsArray=[],this.showTable=!1,this.columnDefs=[{field:"SW_NO",headerName:"Unique No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"ATM_ID",headerName:"ATM Id.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"TRAN_DATE",headerName:"Date.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Time",headerName:"Time",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"CARD_NO",headerName:"Card No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Account No",headerName:"Acc No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Txn No",headerName:"Txn No.",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"RRN",headerName:"RRN",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"AMOUNT",headerName:"Amount",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"TR_TYPE",headerName:"ONUS/OFFUS",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"RESPONSE_CODE",headerName:"Response Code",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Tran status",headerName:"Tran status",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"Remarks-Matching switch status",headerName:"Matching status",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]},{field:"switch matching status",headerName:"Unmatchin status",filter:"agMultiColumnFilter",sortingOrder:["asc","desc"]}],this.defaultColDef={resizable:!0,autoHeight:!0,sortable:!0,maxWidth:1e3,minWidth:200,flex:1},this.gridOptions={cacheBlockSize:10,alwaysShowHorizontalScroll:!0,suppressRowClickSelection:!0,rowSelection:"multiple",cellHeight:60}}ngOnInit(){this.spinner.show(),this.productId=localStorage.getItem("product_id"),this.applicationId=localStorage.getItem("application_id"),this.projectId=localStorage.getItem("project_id"),this.route.queryParams.subscribe(i=>{const n="Exception Transaction listing";n&&this.titleService.setTitle(n),this.atmId=i.atmId,this.fromDate=i.fromDate,this.toDate=i.toDate}),console.log("ATM ID:",this.atmId),console.log("fromDate:",this.fromDate),console.log("toDate:",this.toDate),this.getExceptionTxnListing(),this.getAtmReportsTxnTypes()}selectReportBaseType(i){this.selectedFileReport=i.value}getExceptionTxnListing(){let i={atm_id:this.atmId,fromDate:this.fromDate,toDate:this.toDate};console.log("selectedFileReport+++++>>>>>>>>>>>inside the exception",this.selectedFileReport),this.URMService.getExceptionTxnATMListing(this.productId,this.applicationId,this.projectId,i).then(n=>{console.log("getExceptionTxnATMListing response =>",n),200==n.statusCode&&(n.data.length>0?(this.rowData=n.data,this.spinner.hide()):(this.notify.showErrorToast("No transaction available for specified inputs!","Close"),this.spinner.hide()))}).catch(n=>{console.log("error",n),this.spinner.hide()})}onGridReady(i){this.gridApi=i.api,this.params=i}fetchBtnClick(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"});let n,e;switch(console.log("ExceptionTrxnListingComponent ~ selectReportBaseType ~ selectedType:",this.selectedFileReport),this.selectedFileReport){case"Txn available in Switch but not available in GL":n={fromDate:this.fromDate,toDate:this.toDate,reportType:this.selectedFileReport,atm_id:this.atmId},console.log(" Txn available in Switch but not available in GL ~ fetchBtnClick ~ query:",n),e="Txn available in Switch but not available in GL generated!";break;case"Txn available in Switch but not available in EJ":n={fromDate:this.fromDate,toDate:this.toDate,reportType:this.selectedFileReport,atm_id:this.atmId},console.log(" Txn available in Switch but not available in EJ ~ fetchBtnClick ~ query:",n),e="Txn available in Switch but not available in EJ generated!";break;case"Txn available in Switch and GL but not available in EJ":n={fromDate:this.fromDate,toDate:this.toDate,reportType:this.selectedFileReport,atm_id:this.atmId},console.log(" Txn available in Switch and GL but not available in EJ ~ fetchBtnClick ~ query:",n),e="Txn available in Switch and GL but not available in EJ generated!";break;case"Txn available in EJ and switch but not available in GL":n={fromDate:this.fromDate,toDate:this.toDate,reportType:this.selectedFileReport,atm_id:this.atmId},console.log(" Txn available in EJ and switch but not available in GL ~ fetchBtnClick ~ query:",n),e="Txn available in EJ and switch but not available in GL!";break;default:return console.warn("Unknown report type"),void i.close()}this.URMService.getEodToEodExceptionData(this.productId,this.applicationId,this.projectId,n).then(o=>{console.log("getTranData response =>",o),o&&200===o.statusCode?(this.reportsArray=o.data,this.rowData=o.data,this.spinner.hide(),i.close()):(this.reportsArray=[],this.notify.showErrorToast(o.errorMessage,"Close"),i.close())}).catch(o=>{console.log("error =>",o),this.reportsArray=[],i.close()})}processResponse(i){this.reportsArray=i}downloadEodToEodExceptionReport(){const i=this.dialog.open(g.T,{height:"55vh",width:"35%"}),n=(r,l,w)=>{const M=new Blob([l],{type:"application/vnd.ms-excel;charset=utf-8"}),B=window.URL.createObjectURL(M),C=document.createElement("a");C.download=r,C.href=B,document.body.appendChild(C),C.click(),document.body.removeChild(C),this.notify.showSuccessToast(w,"Close"),i.close()};let e,o,s;switch(console.log("selectedFileReport",this.selectedFileReport),this.selectedFileReport){case"Txn available in Switch but not available in GL":e=this.createQuery(),o=`ExceptionTxn_GL_${Date.now()}.xlsx`,s="Txn available in Switch but not available in GL generated!";break;case"Txn available in Switch but not available in EJ":e=this.createQuery(),o=`ExceptionTxn_EJ_${Date.now()}.xlsx`,s="Txn available in Switch but not available in EJ generated!";break;case"Txn available in Switch and GL but not available in EJ":e=this.createQuery(),o=`ExceptionTxn_GL_EJ_${Date.now()}.xlsx`,s="Txn available in Switch and GL but not available in EJ generated!";break;case"Txn available in EJ and switch but not available in GL":e=this.createQuery(),o=`ExceptionTxn_EJ_GL_${Date.now()}.xlsx`,s="Txn available in EJ and switch but not available in GL generated!";break;default:return console.warn("Unknown report type"),void i.close()}this.URMService.downloadEodToEodExceptionReport(this.productId,this.applicationId,this.projectId,this.atmId,this.fromDate,this.toDate,this.selectedFileReport).then(r=>{console.log(r,"download response"),n(o,r,s)}).catch(r=>{console.error(`Error generating ${this.selectedFileReport}`,r),i.close()})}createQuery(){return{fromDate:this.fromDate,toDate:this.toDate,reportType:this.selectedFileReport,atm_id:this.atmId,type:this.type}}getAtmReportsTxnTypes(){this.URMService.getAtmReportsTxnTypes().then(i=>{(201===i.statusCode||200==i.statusCode)&&(this.reportBaseType=i.data)}).catch(i=>{console.error("An error occurred:",i),this.notify.showErrorToast("Failed to add adjustment ttum!","Close")})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(u.nX),t.rXU(h.bZ),t.rXU(t.sFG),t.rXU(p.V),t.rXU(m.J),t.rXU(f.ex),t.rXU(T.hE))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-exception-trxn-listing"]],decls:27,vars:11,consts:[[1,"exception-txn-container"],[1,"inputs-content"],[1,"text"],[1,"value"],["appearance","outline"],[3,"value","valueChange","selectionChange"],["value","ALL"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"report-btn",3,"click"],[1,"download-btn",3,"click"],[1,"ag-table"],[1,"ag-theme-quartz",2,"height","80vh",3,"rowData","columnDefs","gridOptions","defaultColDef","pagination","paginationPageSize","gridReady"],[3,"value"]],template:function(n,e){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"span",2),t.EFF(3,"ATM Id:\xa0 "),t.j41(4,"span",3),t.EFF(5),t.k0s()(),t.j41(6,"span",2),t.EFF(7,"From date:\xa0 "),t.j41(8,"span",3),t.EFF(9),t.k0s()(),t.j41(10,"span",2),t.EFF(11,"To date:\xa0 "),t.j41(12,"span",3),t.EFF(13),t.k0s()(),t.j41(14,"mat-form-field",4)(15,"mat-label"),t.EFF(16,"Type"),t.k0s(),t.j41(17,"mat-select",5),t.bIt("valueChange",function(s){return e.selectedfilterType=s})("selectionChange",function(s){return e.selectReportBaseType(s)}),t.j41(18,"mat-option",6),t.EFF(19,"ALL"),t.k0s(),t.DNE(20,P,2,2,"mat-option",7),t.k0s()(),t.j41(21,"button",8),t.bIt("click",function(){return e.fetchBtnClick()}),t.EFF(22,"Fetch report"),t.k0s(),t.j41(23,"button",9),t.bIt("click",function(){return e.downloadEodToEodExceptionReport()}),t.EFF(24,"Download file"),t.k0s()(),t.j41(25,"div",10)(26,"ag-grid-angular",11),t.bIt("gridReady",function(s){return e.onGridReady(s)}),t.k0s()()()),2&n&&(t.R7$(5),t.JRh(e.atmId),t.R7$(4),t.JRh(e.fromDate),t.R7$(4),t.JRh(e.toDate),t.R7$(4),t.Y8G("value",e.selectedfilterType),t.R7$(3),t.Y8G("ngForOf",e.reportBaseType),t.R7$(6),t.Y8G("rowData",e.rowData)("columnDefs",e.columnDefs)("gridOptions",e.gridOptions)("defaultColDef",e.defaultColDef)("pagination",!0)("paginationPageSize",e.paginationPageSize))},dependencies:[x.Sq,D.rl,D.nJ,_.VO,O.wT,b.xs],styles:[".inputs-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(6,1fr);grid-auto-rows:50px;border-radius:5px;background:transparent;padding:20px 20px 0;gap:10px}.inputs-content[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border:1px solid #E9E9E9;border-radius:5px;background-color:#f9fafb;padding:1em;text-align:center}.value[_ngcontent-%COMP%]{font-weight:500}.ag-table[_ngcontent-%COMP%]{padding:20px}.report-btn[_ngcontent-%COMP%], .download-btn[_ngcontent-%COMP%]{background:rgb(147,81,251);color:#fff;border:1px solid rgb(147,81,251);width:180px;height:50px;font-size:18px;font-weight:400;margin-bottom:1em;line-height:24px;border-radius:8px}"]})}}return a})()}];let J=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(G),u.iI]})}}return a})()}}]);